#############
# Metastore #
#############
- name: hive.exec.scratchdir
  recommendExpression: "ladder:///${service['sid']}/tmp/hive"
  defaultValue: "/tmp/hive-${user.name}"
  valueType: URI
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: ["hive-site.xml"]
  visibility: READ_WRITE

- name: hive.metastore.warehouse.dir
  recommendExpression: "ladder:///${service['sid']}/user/hive/warehouse"
  defaultValue: "/user/hive/warehouse"
  valueType: URI
  scope: !<RoleTypes>
    roleTypes: [INCEPTOR_METASTORE]
  onDeps: []
  groups: ["hive-site.xml"]
  visibility: READ_WRITE

- name: hive.metastore.execute.setugi
  recommendExpression: true
  defaultValue: null
  valueType: BOOL
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: ["hive-site.xml"]
  visibility: READ_WRITE

- name: hive.hwi.war.file
  recommendExpression: lib/hive-hwi-0.8.1.war
  defaultValue: null
  valueType: ABSOLUTE_PATH
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: ["hive-site.xml"]
  visibility: READ_WRITE

- name: plsql.compile.dml.check.semantic
  recommendExpression: true
  defaultValue: null
  valueType: BOOL
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: ["hive-site.xml"]
  visibility: READ_WRITE

- name: javax.jdo.option.ConnectionPassword
  recommendExpression: password
  defaultValue: null
  valueType: STRING
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: ["hive-site.xml"]
  visibility: PASSWORD

- name: hive.server2.session.check.interval
  recommendExpression: 60000
  defaultValue: null
  valueType: NON_NEG_INT
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: ["hive-site.xml"]
  visibility: READ_WRITE

- name: hive.users.in.admin.role
  recommendExpression: hive,hue
  defaultValue: null
  valueType: STRING
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: ["hive-site.xml"]
  visibility: READ_WRITE

# TODO what's this xxx?
- name: mapreduce.framework.name
  recommendExpression: xxx
  defaultValue: null
  valueType: STRING
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: ["hive-site.xml"]
  visibility: READ_WRITE

- name: hbase.client.scanner.caching
  recommendExpression: 500
  defaultValue: null
  valueType: NON_NEG_INT
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: ["hive-site.xml"]
  visibility: READ_WRITE

- name: datanucleus.autoStartMechanism
  recommendExpression: SchemaTable
  defaultValue: null
  valueType: STRING
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: ["hive-site.xml"]
  visibility: READ_WRITE

- name: hive.input.format
  recommendExpression: org.apache.hadoop.hive.ql.io.HiveInputFormat
  defaultValue: null
  valueType: STRING
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: ["hive-site.xml"]
  visibility: READ_WRITE

- name: hive.aux.jars.path
  recommendExpression: ""
  defaultValue: ""
  valueType: STRING
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: ["hive-site.xml"]
  visibility: READ_WRITE

- name: hive.server2.idle.session.timeout
  recommendExpression: 14400000
  defaultValue: null
  valueType: NON_NEG_INT
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: ["hive-site.xml"]
  visibility: READ_WRITE

- name: datanucleus.fixedDatastore
  recommendExpression: true
  defaultValue: null
  valueType: BOOL
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: ["hive-site.xml"]
  visibility: READ_WRITE

- name: javax.jdo.option.ConnectionDriverName
  recommendExpression: com.mysql.jdbc.Driver
  defaultValue: null
  valueType: STRING
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: ["hive-site.xml"]
  visibility: READ_WRITE

- name: javax.jdo.option.ConnectionUserName
  recommendExpression: inceptoruser
  defaultValue: null
  valueType: STRING
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: ["hive-site.xml"]
  visibility: READ_WRITE

- name: hive.exec.dynamic.partition
  recommendExpression: false
  defaultValue: null
  valueType: BOOL
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: ["hive-site.xml"]
  visibility: READ_WRITE

- name: hive.exec.compress.output
  recommendExpression: false
  defaultValue: null
  valueType: BOOL
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: ["hive-site.xml"]
  visibility: READ_WRITE

- name: hive.server2.authentication
  recommendExpression: NONE
  defaultValue: null
  valueType: STRING
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: []
  visibility: READ_WRITE

- name: hive.server2.idle.operation.timeout
  recommendExpression: 28800000
  defaultValue: null
  valueType: NON_NEG_INT
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: ["hive-site.xml"]
  visibility: READ_WRITE

- name: datanucleus.autoCreateSchema
  recommendExpression: false
  defaultValue: null
  valueType: BOOL
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: ["hive-site.xml"]
  visibility: READ_WRITE

- name: hive.exec.compress.intermediate
  recommendExpression: true
  defaultValue: null
  valueType: BOOL
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: ["hive-site.xml"]
  visibility: READ_WRITE

- name: hive.server2.logging.operation.enabled
  recommendExpression: false
  defaultValue: null
  valueType: BOOL
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: ["hive-site.xml"]
  visibility: READ_WRITE

- name: hive.server2.enabled
  recommendExpression: true
  defaultValue: null
  valueType: STRING
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: ["hive-site.xml"]
  visibility: READ_WRITE

- name: ngmr.fastdisk.dir
  recommendExpression: /mnt/ramdisk/ngmr
  defaultValue: null
  valueType: ABSOLUTE_PATH
  scope: !<RoleTypes>
    roleTypes: [INCEPTOR_SERVER, INCEPTOR_EXECUTOR]
  isNodeSpecific: true
  onDeps: []
  groups: []
  visibility: READ_WRITE

- name: ngmr.localdir
  recommendExpression: |
    <#function localDir suffix>
      <#if rcmdMounts?size == 0>
        <#return suffix>
      <#else>
        <#local dirs = []>
        <#list rcmdMounts?sort as mnt>
         <#local dirs = dirs + [mnt + suffix]>
        </#list>
        <#return dirs?join(",")>
      </#if>
    </#function>
    ${localDir("/hadoop/ngmr/" + service['sid'])}
  isNodeSpecific: true
  defaultValue: null
  valueType: ABSOLUTE_PATH
  scope: !<RoleTypes>
    roleTypes: [INCEPTOR_SERVER, INCEPTOR_EXECUTOR]
  onDeps: []
  groups: []
  visibility: READ_WRITE

- name: ngmr.fastdisk.size
  recommendExpression: 0.5
  defaultValue: null
  valueType: FLOAT
  scope: !<RoleTypes>
    roleTypes: [INCEPTOR_SERVER, INCEPTOR_EXECUTOR]
  onDeps: []
  groups: []
  visibility: READ_WRITE

- name: ngmr.cache.size
  recommendExpression: 0.5
  defaultValue: null
  valueType: FLOAT
  scope: !<RoleTypes>
    roleTypes: [INCEPTOR_SERVER, INCEPTOR_EXECUTOR]
  onDeps: []
  groups: []
  visibility: READ_WRITE

- name: ngmr.executors.perjob
  recommendExpression: 1
  defaultValue: null
  valueType: NON_NEG_INT
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: []
  visibility: READ_WRITE

- name: inceptor.ui.port
  recommendExpression: 8888
  defaultValue: null
  valueType: PORT
  scope: !<RoleTypes>
    roleTypes: [INCEPTOR_SERVER]
  onDeps: []
  groups: []
  visibility: READ_WRITE

- name: inceptor.metastore.memory
  recommendExpression: 4096
  defaultValue: null
  valueType: MB
  isNodeSpecific: true
  scope: !<RoleTypes>
    roleTypes: [INCEPTOR_METASTORE]
  onDeps: []
  groups: []
  visibility: READ_WRITE

- name: inceptor.server.memory
  recommendExpression: 8192
  defaultValue: null
  valueType: MB
  isNodeSpecific: true
  scope: !<RoleTypes>
    roleTypes: [INCEPTOR_SERVER]
  onDeps: []
  groups: []
  visibility: READ_WRITE

# min(32000m, total_memory_size / 2)
- name: inceptor.executor.memory
  recommendExpression: |
    <#assign  thirdMemMB = (memBytes/1048576/2)?int>
    <#if thirdMemMB <= 32000>
      ${thirdMemMB?int}
    <#else>
      32000
    </#if>
  defaultValue: null
  valueType: MB
  isNodeSpecific: true
  scope: !<RoleTypes>
    roleTypes: [INCEPTOR_EXECUTOR]
  onDeps: []
  groups: []
  visibility: READ_WRITE

- name: inceptor.executor.cores
  recommendExpression: |
    <#if (numCores/2)?int gt 10>
      ${(numCores/2)?int}
    <#else>
      10
    </#if>
  defaultValue: null
  valueType: NON_NEG_INT
  isNodeSpecific: true
  scope: !<RoleTypes>
    roleTypes: [INCEPTOR_EXECUTOR]
  onDeps: []
  groups: []
  visibility: READ_WRITE

- name: hive.server2.thrift.port
  recommendExpression: 10000
  defaultValue: null
  valueType: PORT
  scope: !<RoleTypes>
    roleTypes: [INCEPTOR_SERVER]
  onDeps: []
  groups: ["hive-site.xml"]
  visibility: READ_WRITE

- name: hive.decimal.wrdecimal.enabled
  recommendExpression: true
  defaultValue: null
  valueType: BOOL
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: ["hive-site.xml"]
  visibility: READ_WRITE

- name: hive.metastore.port
  recommendExpression: 9083
  defaultValue: null
  valueType: PORT
  scope: !<RoleTypes>
    roleTypes: [INCEPTOR_METASTORE]
  onDeps: []
  groups: []
  visibility: READ_WRITE

- name: mapreduce.map.memory.mb
  recommendExpression: 2048
  defaultValue: null
  valueType: NON_NEG_INT
  scope: !<RoleTypes>
    roleTypes: [INCEPTOR_METASTORE]
  onDeps: []
  groups: ["hive-site.xml"]
  visibility: READ_WRITE

- name: mapred.child.java.opts
  recommendExpression: -agentpath:/usr/lib/hadoop/bin/libagent.so -Xmx4096m
  defaultValue: null
  valueType: STRING
  scope: !<RoleTypes>
    roleTypes: [INCEPTOR_METASTORE]
  onDeps: []
  groups: ["hive-site.xml"]
  visibility: READ_WRITE

- name: mysql.port
  recommendExpression: 3306
  defaultValue: null
  valueType: PORT
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: []
  visibility: READ_WRITE

- name: mysql.datadir
  recommendExpression: /hadoop/mysql
  defaultValue: null
  valueType: STRING
  scope: !<RoleTypes>
    roleTypes: [INCEPTOR_MYSQL]
  onDeps: []
  groups: []
  visibility: READ_WRITE

- name: executor.container.limits.memory
  recommendExpression: -1
  defaultValue: null
  valueType: GB
  scope: !<RoleTypes>
    roleTypes: [INCEPTOR_EXECUTOR]
  onDeps: []
  groups: []
  visibility: READ_WRITE

- name: executor.container.limits.cpu
  recommendExpression: -1
  defaultValue: null
  valueType: NON_NEG_INT
  scope: !<RoleTypes>
    roleTypes: [INCEPTOR_EXECUTOR]
  onDeps: []
  groups: []
  visibility: READ_WRITE

- name: executor.container.requests.memory
  recommendExpression: -1
  defaultValue: null
  valueType: GB
  scope: !<RoleTypes>
    roleTypes: [INCEPTOR_EXECUTOR]
  onDeps: []
  groups: []
  visibility: READ_WRITE

- name: executor.container.requests.cpu
  recommendExpression: -1
  defaultValue: null
  valueType: NON_NEG_INT
  scope: !<RoleTypes>
    roleTypes: [INCEPTOR_EXECUTOR]
  onDeps: []
  groups: []
  visibility: READ_WRITE

- name: executor.memory.ratio
  recommendExpression: -1
  defaultValue: null
  valueType: FLOAT
  scope: !<RoleTypes>
    roleTypes: [INCEPTOR_EXECUTOR]
  onDeps: []
  groups: []
  visibility: READ_WRITE

- name: executor.number.eachnode
  recommendExpression: 1
  defaultValue: null
  valueType: NON_NEG_INT
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: []
  visibility: READ_WRITE

- name: server.container.limits.memory
  recommendExpression: -1
  defaultValue: null
  valueType: GB
  scope: !<RoleTypes>
    roleTypes: [INCEPTOR_SERVER]
  onDeps: []
  groups: []
  visibility: READ_WRITE

- name: server.container.limits.cpu
  recommendExpression: -1
  defaultValue: null
  valueType: NON_NEG_INT
  scope: !<RoleTypes>
    roleTypes: [INCEPTOR_SERVER]
  onDeps: []
  groups: []
  visibility: READ_WRITE

- name: server.container.requests.memory
  recommendExpression: -1
  defaultValue: null
  valueType: GB
  scope: !<RoleTypes>
    roleTypes: [INCEPTOR_SERVER]
  onDeps: []
  groups: []
  visibility: READ_WRITE

- name: server.container.requests.cpu
  recommendExpression: -1
  defaultValue: null
  valueType: NON_NEG_INT
  scope: !<RoleTypes>
    roleTypes: [INCEPTOR_SERVER]
  onDeps: []
  groups: []
  visibility: READ_WRITE

- name: server.memory.ratio
  recommendExpression: -1
  defaultValue: null
  valueType: FLOAT
  scope: !<RoleTypes>
    roleTypes: [INCEPTOR_SERVER]
  onDeps: []
  groups: []
  visibility: READ_WRITE

- name: metastore.container.limits.memory
  recommendExpression: -1
  defaultValue: null
  valueType: GB
  scope: !<RoleTypes>
    roleTypes: [INCEPTOR_METASTORE]
  onDeps: []
  groups: []
  visibility: READ_WRITE

- name: metastore.container.limits.cpu
  recommendExpression: -1
  defaultValue: null
  valueType: NON_NEG_INT
  scope: !<RoleTypes>
    roleTypes: [INCEPTOR_METASTORE]
  onDeps: []
  groups: []
  visibility: READ_WRITE

- name: metastore.container.requests.memory
  recommendExpression: -1
  defaultValue: null
  valueType: GB
  scope: !<RoleTypes>
    roleTypes: [INCEPTOR_METASTORE]
  onDeps: []
  groups: []
  visibility: READ_WRITE

- name: metastore.container.requests.cpu
  recommendExpression: -1
  defaultValue: null
  valueType: NON_NEG_INT
  scope: !<RoleTypes>
    roleTypes: [INCEPTOR_METASTORE]
  onDeps: []
  groups: []
  visibility: READ_WRITE

- name: metastore.memory.ratio
  recommendExpression: -1
  defaultValue: null
  valueType: FLOAT
  scope: !<RoleTypes>
    roleTypes: [INCEPTOR_METASTORE]
  onDeps: []
  groups: []
  visibility: READ_WRITE

# inceptor scheduler
- name: inceptor.scheduler.enabled
  recommendExpression: false
  defaultValue: null
  valueType: BOOL
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: []
  visibility: READ_WRITE

- name: spark.driver.port
  recommendExpression: 51888
  defaultValue: null
  valueType: PORT
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: []
  visibility: READ_WRITE

- name: EXTRA_DRIVER_OPTS
  recommendExpression: ""
  defaultValue: ""
  valueType: STRING
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: []
  visibility: READ_WRITE

- name: EXTRA_EXECUTOR_OPTS
  recommendExpression: ""
  defaultValue: ""
  valueType: STRING
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: []
  visibility: READ_WRITE

- name: rubik.connection.url
  recommendExpression: |
    <#compress>
    <#assign mysqlHostPorts = []/>
    <#list dependencies.TXSQL.roles['TXSQL_SERVER'] as role>
        <#assign mysqlHostPorts = mysqlHostPorts + [role.hostname + ':' + dependencies.TXSQL['mysql.rw.port']]>
    </#list>
    <#assign mysqlHostPort = mysqlHostPorts?join(",")>
    ${mysqlHostPort}
    </#compress>
  defaultValue: ""
  valueType: STRING
  scope: !<ServiceLevel> {}
  onDeps: ['TXSQL']
  groups: []
  visibility: READ_WRITE

- name: rubik.connection.username
  recommendExpression: inceptor
  defaultValue: ""
  valueType: STRING
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: []
  visibility: READ_WRITE

- name: rubik.connection.password
  recommendExpression: 123
  defaultValue: ""
  valueType: STRING
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: []
  visibility: READ_WRITE

- name: rubik.connection.database
  recommendExpression: rubik_rubik1
  defaultValue: ""
  valueType: STRING
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: []
  visibility: READ_WRITE

# inceptor profiler
- name: inceptor.profiler.memory
  recommendExpression: 4096
  defaultValue: null
  valueType: MB
  isNodeSpecific: true
  scope: !<RoleTypes>
    roleTypes: [INCEPTOR_PROFILER]
  onDeps: []
  groups: []
  visibility: READ_WRITE
- name: profiler.container.limits.memory
  recommendExpression: -1
  defaultValue: null
  valueType: GB
  scope: !<RoleTypes>
    roleTypes: [INCEPTOR_PROFILER]
  onDeps: []
  groups: []
  visibility: READ_WRITE
- name: profiler.container.limits.cpu
  recommendExpression: -1
  defaultValue: null
  valueType: NON_NEG_INT
  scope: !<RoleTypes>
    roleTypes: [INCEPTOR_PROFILER]
  onDeps: []
  groups: []
  visibility: READ_WRITE
- name: profiler.container.requests.memory
  recommendExpression: -1
  defaultValue: null
  valueType: GB
  scope: !<RoleTypes>
    roleTypes: [INCEPTOR_PROFILER]
  onDeps: []
  groups: []
  visibility: READ_WRITE
- name: profiler.container.requests.cpu
  recommendExpression: -1
  defaultValue: null
  valueType: NON_NEG_INT
  scope: !<RoleTypes>
    roleTypes: [INCEPTOR_PROFILER]
  onDeps: []
  groups: []
  visibility: READ_WRITE
- name: profiler.memory.ratio
  recommendExpression: -1
  defaultValue: null
  valueType: FLOAT
  scope: !<RoleTypes>
    roleTypes: [INCEPTOR_PROFILER]
  onDeps: []
  groups: []
  visibility: READ_WRITE
- name: inceptor.profiler.ui.port
  recommendExpression: 9093
  defaultValue: null
  valueType: PORT
  scope: !<RoleTypes>
    roleTypes: [INCEPTOR_PROFILER]
  onDeps: []
  groups: ["profiler-site.xml"]
  visibility: READ_WRITE
- name: profiler.scanner.init.time.hhmm
  recommendExpression: "18:00"
  defaultValue: null
  valueType: STRING
  scope: !<RoleTypes>
    roleTypes: [INCEPTOR_PROFILER]
  onDeps: []
  groups: ["profiler-site.xml"]
  visibility: READ_WRITE
- name: profiler.scanner.interval.hours
  recommendExpression: 24
  defaultValue: null
  valueType: NON_NEG_INT
  scope: !<RoleTypes>
    roleTypes: [INCEPTOR_PROFILER]
  onDeps: []
  groups: ["profiler-site.xml"]
  visibility: READ_WRITE
- name: profiler.stale.percent
  recommendExpression: 20
  defaultValue: null
  valueType: NON_NEG_INT
  scope: !<RoleTypes>
    roleTypes: [INCEPTOR_PROFILER]
  onDeps: []
  groups: ["profiler-site.xml"]
  visibility: READ_WRITE
- name: profiler.metastore.fetch.batch.size
  recommendExpression: 50
  defaultValue: null
  valueType: NON_NEG_INT
  scope: !<RoleTypes>
    roleTypes: [INCEPTOR_PROFILER]
  onDeps: []
  groups: ["profiler-site.xml"]
  visibility: READ_WRITE
# inceptor compactor
- name: inceptor.compactor.memory
  recommendExpression: 4096
  defaultValue: null
  valueType: MB
  isNodeSpecific: true
  scope: !<RoleTypes>
    roleTypes: [INCEPTOR_COMPACTOR]
  onDeps: []
  groups: []
  visibility: READ_WRITE
- name: compactor.container.limits.memory
  recommendExpression: -1
  defaultValue: null
  valueType: GB
  scope: !<RoleTypes>
    roleTypes: [INCEPTOR_COMPACTOR]
  onDeps: []
  groups: []
  visibility: READ_WRITE
- name: compactor.container.limits.cpu
  recommendExpression: -1
  defaultValue: null
  valueType: NON_NEG_INT
  scope: !<RoleTypes>
    roleTypes: [INCEPTOR_COMPACTOR]
  onDeps: []
  groups: []
  visibility: READ_WRITE
- name: compactor.container.requests.memory
  recommendExpression: -1
  defaultValue: null
  valueType: GB
  scope: !<RoleTypes>
    roleTypes: [INCEPTOR_COMPACTOR]
  onDeps: []
  groups: []
  visibility: READ_WRITE
- name: compactor.container.requests.cpu
  recommendExpression: -1
  defaultValue: null
  valueType: NON_NEG_INT
  scope: !<RoleTypes>
    roleTypes: [INCEPTOR_COMPACTOR]
  onDeps: []
  groups: []
  visibility: READ_WRITE
- name: compactor.memory.ratio
  recommendExpression: -1
  defaultValue: null
  valueType: FLOAT
  scope: !<RoleTypes>
    roleTypes: [INCEPTOR_COMPACTOR]
  onDeps: []
  groups: []
  visibility: READ_WRITE
- name: inceptor.compactor.ui.port
  recommendExpression: 9918
  defaultValue: null
  valueType: PORT
  scope: !<RoleTypes>
    roleTypes: [INCEPTOR_COMPACTOR]
  onDeps: []
  groups: ["compactor-site.xml"]
  visibility: READ_WRITE
- name: compactor.full.scan.initial.time
  recommendExpression: 12:00
  defaultValue: null
  valueType: STRING
  scope: !<RoleTypes>
    roleTypes: [INCEPTOR_COMPACTOR]
  onDeps: []
  groups: ["compactor-site.xml"]
  visibility: READ_WRITE
- name: compactor.full.scan.delay.interval.hour
  recommendExpression: 24
  defaultValue: null
  valueType: NON_NEG_INT
  scope: !<RoleTypes>
    roleTypes: [INCEPTOR_COMPACTOR]
  onDeps: []
  groups: ["compactor-site.xml"]
  visibility: READ_WRITE
- name: compactor.partial.scan.switch
  recommendExpression: false
  defaultValue: null
  valueType: BOOL
  scope: !<RoleTypes>
    roleTypes: [INCEPTOR_COMPACTOR]
  onDeps: []
  groups: ["compactor-site.xml"]
  visibility: READ_WRITE
- name: compactor.fetch.batch.size
  recommendExpression: 50
  defaultValue: null
  valueType: NON_NEG_INT
  scope: !<RoleTypes>
    roleTypes: [INCEPTOR_COMPACTOR]
  onDeps: []
  groups: ["compactor-site.xml"]
  visibility: READ_WRITE
- name: compactor.valid.delta.count.persist.threshold
  recommendExpression: 50
  defaultValue: null
  valueType: NON_NEG_INT
  scope: !<RoleTypes>
    roleTypes: [INCEPTOR_COMPACTOR]
  onDeps: []
  groups: ["compactor-site.xml"]
  visibility: READ_WRITE
- name: compactor.table.delta.count.alarm.threshold
  recommendExpression: 2
  defaultValue: null
  valueType: NON_NEG_INT
  scope: !<RoleTypes>
    roleTypes: [INCEPTOR_COMPACTOR]
  onDeps: []
  groups: ["compactor-site.xml"]
  visibility: READ_WRITE
- name: compactor.table.day.count.alarm.threshold
  recommendExpression: 3
  defaultValue: null
  valueType: NON_NEG_INT
  scope: !<RoleTypes>
    roleTypes: [INCEPTOR_COMPACTOR]
  onDeps: []
  groups: ["compactor-site.xml"]
  visibility: READ_WRITE
- name: compactor.blacklist.alarm.threshold
  recommendExpression: 1
  defaultValue: null
  valueType: NON_NEG_INT
  scope: !<RoleTypes>
    roleTypes: [INCEPTOR_COMPACTOR]
  onDeps: []
  groups: ["compactor-site.xml"]
  visibility: READ_WRITE
- name: compactor.auto.compact.submitter.switch
  recommendExpression: false
  defaultValue: null
  valueType: BOOL
  scope: !<RoleTypes>
    roleTypes: [INCEPTOR_COMPACTOR]
  onDeps: []
  groups: ["compactor-site.xml"]
  visibility: READ_WRITE

###########################
# Extra config for ArgoDB #
###########################
- name: argodb.docker.enabled
  recommendExpression: true
  defaultValue: true
  valueType: BOOL
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: []
  visibility: READ_WRITE

- name: ladder.user.short.circuit.enabled
  recommendExpression: false
  defaultValue: false
  valueType: BOOL
  scope: !<RoleTypes>
    roleTypes: [INCEPTOR_SERVER]
  onDeps: []
  groups: ["hive-site.xml", "core-site.xml"]
  visibility: READ_WRITE

- name: holodesk.shiva.meta
  recommendExpression: true
  defaultValue: true
  valueType: BOOL
  scope: !<RoleTypes>
    roleTypes: [INCEPTOR_SERVER]
  onDeps: []
  groups: ["hive-site.xml"]
  visibility: READ_WRITE

- name: holodesk.shiva.capacity.unit
  recommendExpression: 1
  defaultValue: 1
  valueType: NON_NEG_INT
  scope: !<RoleTypes>
    roleTypes: [INCEPTOR_SERVER]
  onDeps: []
  groups: ["hive-site.xml"]
  visibility: READ_WRITE

- name: holodesk.shiva.tablet.num
  recommendExpression: 1
  defaultValue: 1
  valueType: NON_NEG_INT
  scope: !<RoleTypes>
    roleTypes: [INCEPTOR_SERVER]
  onDeps: []
  groups: ["hive-site.xml"]
  visibility: READ_WRITE

#########
# Shiva #
#########
# master.conf
- name: shiva.master.log.log_dir
  recommendExpression: /var/log/${service.sid}
  defaultValue: null
  valueType: STRING
  scope: !<RoleTypes> {roleTypes: [SHIVA_MASTER]}
  onDeps: []
  groups: ["master.conf"]
  visibility: READ_WRITE

- name: shiva.master.log.log_level
  recommendExpression: 5
  defaultValue: null
  valueType: NON_NEG_INT
  scope: !<RoleTypes> {roleTypes: [SHIVA_MASTER]}
  onDeps: []
  groups: ["master.conf"]
  visibility: READ_WRITE

- name: shiva.master.log.log_max_size
  recommendExpression: 1024
  defaultValue: null
  valueType: NON_NEG_INT
  scope: !<RoleTypes> {roleTypes: [SHIVA_MASTER]}
  onDeps: []
  groups: ["master.conf"]
  visibility: READ_WRITE

- name: shiva.master.log.log_file_num
  recommendExpression: 10
  defaultValue: null
  valueType: NON_NEG_INT
  scope: !<RoleTypes> {roleTypes: [SHIVA_MASTER]}
  onDeps: []
  groups: ["master.conf"]
  visibility: READ_WRITE

- name: shiva.master.master.data_path
  recommendExpression: |
    <#function localDir suffix>
      <#if rcmdMounts?size == 0>
        <#return suffix>
      <#else>
        <#return rcmdMounts?sort?first + suffix>
      </#if>
    </#function>
    ${localDir("/shiva-master/data")}
  defaultValue: null
  valueType: STRING
  isNodeSpecific: true
  scope: !<RoleTypes> {roleTypes: [SHIVA_MASTER]}
  onDeps: []
  groups: ["master.conf"]
  visibility: READ_WRITE

- name: shiva.master.rpc_service.master_service_port
  recommendExpression: 9630
  defaultValue: null
  valueType: NON_NEG_INT
  scope: !<RoleTypes> {roleTypes: [SHIVA_MASTER]}
  onDeps: []
  groups: ["master.conf"]
  visibility: READ_WRITE

- name: shiva.master.rpc_service.master_service_thread_num
  recommendExpression: 1
  defaultValue: 1
  valueType: NON_NEG_INT
  scope: !<RoleTypes> {roleTypes: [SHIVA_MASTER]}
  onDeps: []
  groups: ["master.conf"]
  visibility: READ_WRITE

- name: shiva.master.rpc_service.monitor_service_thread_num
  recommendExpression: 8
  defaultValue: 8
  valueType: NON_NEG_INT
  scope: !<RoleTypes> {roleTypes: [SHIVA_MASTER]}
  onDeps: []
  groups: ["master.conf"]
  visibility: READ_WRITE

- name: shiva.master.rpc_service.raft_service_thread_num
  recommendExpression: 2
  defaultValue: 2
  valueType: NON_NEG_INT
  scope: !<RoleTypes> {roleTypes: [SHIVA_MASTER]}
  onDeps: []
  groups: ["master.conf"]
  visibility: READ_WRITE

- name: shiva.master.rpc_service.recover_service_thread_num
  recommendExpression: 1
  defaultValue: 1
  valueType: NON_NEG_INT
  scope: !<RoleTypes> {roleTypes: [SHIVA_MASTER]}
  onDeps: []
  groups: ["master.conf"]
  visibility: READ_WRITE

- name: shiva.master.rpc_client.rpc_work_thread_num
  recommendExpression: 8
  defaultValue: 8
  valueType: NON_NEG_INT
  scope: !<RoleTypes> {roleTypes: [SHIVA_MASTER]}
  onDeps: []
  groups: ["master.conf"]
  visibility: READ_WRITE

- name: shiva.master.rpc_client.rpc_callback_thread_num
  recommendExpression: 8
  defaultValue: 8
  valueType: NON_NEG_INT
  scope: !<RoleTypes> {roleTypes: [SHIVA_MASTER]}
  onDeps: []
  groups: ["master.conf"]
  visibility: READ_WRITE

- name: shiva.master.rpc_client.rpc_timeout_ms
  recommendExpression: 10000
  defaultValue: 10000
  valueType: NON_NEG_INT
  scope: !<RoleTypes> {roleTypes: [SHIVA_MASTER]}
  onDeps: []
  groups: ["master.conf"]
  visibility: READ_WRITE

- name: shiva.master.recover.recover_rpc_call_timeout_ms
  recommendExpression: 10000
  defaultValue: 10000
  valueType: NON_NEG_INT
  scope: !<RoleTypes> {roleTypes: [SHIVA_MASTER]}
  onDeps: []
  groups: ["master.conf"]
  visibility: READ_WRITE

- name: shiva.master.recover.recover_data_buffer_size_mb
  recommendExpression: 4
  defaultValue: 4
  valueType: NON_NEG_INT
  scope: !<RoleTypes> {roleTypes: [SHIVA_MASTER]}
  onDeps: []
  groups: ["master.conf"]
  visibility: READ_WRITE

- name: shiva.master.recover.recover_data_max_concurrent
  recommendExpression: 2
  defaultValue: 2
  valueType: NON_NEG_INT
  scope: !<RoleTypes> {roleTypes: [SHIVA_MASTER]}
  onDeps: []
  groups: ["master.conf"]
  visibility: READ_WRITE

- name: shiva.master.raft.heartbeat_period_ms
  recommendExpression: 5000
  defaultValue: 5000
  valueType: NON_NEG_INT
  scope: !<RoleTypes> {roleTypes: [SHIVA_MASTER]}
  onDeps: []
  groups: ["master.conf"]
  visibility: READ_WRITE

- name: shiva.master.raft.max_batch_size_b
  recommendExpression: 2097152
  defaultValue: 2097152
  valueType: NON_NEG_INT
  scope: !<RoleTypes> {roleTypes: [SHIVA_MASTER]}
  onDeps: []
  groups: ["master.conf"]
  visibility: READ_WRITE

- name: shiva.master.raft.election_threshold
  recommendExpression: 5
  defaultValue: 5
  valueType: NON_NEG_INT
  scope: !<RoleTypes> {roleTypes: [SHIVA_MASTER]}
  onDeps: []
  groups: ["master.conf"]
  visibility: READ_WRITE

- name: shiva.master.raft.disruption_threshold
  recommendExpression: 3
  defaultValue: 3
  valueType: NON_NEG_INT
  scope: !<RoleTypes> {roleTypes: [SHIVA_MASTER]}
  onDeps: []
  groups: ["master.conf"]
  visibility: READ_WRITE

- name: shiva.master.raft.max_replicate_buffer_size_mb
  recommendExpression: 16
  defaultValue: 16
  valueType: NON_NEG_INT
  scope: !<RoleTypes> {roleTypes: [SHIVA_MASTER]}
  onDeps: []
  groups: ["master.conf"]
  visibility: READ_WRITE

- name: shiva.master.scheduler.get_server_statistic_period_s
  recommendExpression: 10
  defaultValue: 10
  valueType: NON_NEG_INT
  scope: !<RoleTypes> {roleTypes: [SHIVA_MASTER]}
  onDeps: []
  groups: ["master.conf"]
  visibility: READ_WRITE

- name: shiva.master.scheduler.get_all_tablets_period_s
  recommendExpression: 1800
  defaultValue: 1800
  valueType: NON_NEG_INT
  scope: !<RoleTypes> {roleTypes: [SHIVA_MASTER]}
  onDeps: []
  groups: ["master.conf"]
  visibility: READ_WRITE

- name: shiva.master.scheduler.dead_server_timeout_s
  recommendExpression: 60
  defaultValue: 60
  valueType: NON_NEG_INT
  scope: !<RoleTypes> {roleTypes: [SHIVA_MASTER]}
  onDeps: []
  groups: ["master.conf"]
  visibility: READ_WRITE

- name: shiva.master.scheduler.bulk_gc_period_s
  recommendExpression: 60
  defaultValue: 60
  valueType: NON_NEG_INT
  scope: !<RoleTypes> {roleTypes: [SHIVA_MASTER]}
  onDeps: []
  groups: ["master.conf"]
  visibility: READ_WRITE

- name: shiva.master.scheduler.bulk_lease_timeout_s
  recommendExpression: 600
  defaultValue: 600
  valueType: NON_NEG_INT
  scope: !<RoleTypes> {roleTypes: [SHIVA_MASTER]}
  onDeps: []
  groups: ["master.conf"]
  visibility: READ_WRITE

# tabletserver.conf
- name: shiva.tabletserver.log.log_dir
  recommendExpression: /var/log/${service.sid}
  defaultValue: null
  valueType: STRING
  scope: !<RoleTypes> {roleTypes: [SHIVA_TABLETSERVER]}
  onDeps: []
  groups: ["tabletserver.conf"]
  visibility: READ_WRITE

- name: shiva.tabletserver.log.log_level
  recommendExpression: 5
  defaultValue: null
  valueType: NON_NEG_INT
  scope: !<RoleTypes> {roleTypes: [SHIVA_TABLETSERVER]}
  onDeps: []
  groups: ["tabletserver.conf"]
  visibility: READ_WRITE

- name: shiva.tabletserver.log.log_max_size
  recommendExpression: 1024
  defaultValue: null
  valueType: NON_NEG_INT
  scope: !<RoleTypes> {roleTypes: [SHIVA_TABLETSERVER]}
  onDeps: []
  groups: ["tabletserver.conf"]
  visibility: READ_WRITE

- name: shiva.tabletserver.log.log_file_num
  recommendExpression: 10
  defaultValue: null
  valueType: NON_NEG_INT
  scope: !<RoleTypes> {roleTypes: [SHIVA_TABLETSERVER]}
  onDeps: []
  groups: ["tabletserver.conf"]
  visibility: READ_WRITE

- name: shiva.tabletserver.tabletserver.topology_conf
  recommendExpression: /etc/${service.sid}/conf/shiva/topology.conf
  defaultValue: null
  valueType: STRING
  scope: !<RoleTypes> {roleTypes: [SHIVA_TABLETSERVER]}
  onDeps: []
  groups: ["tabletserver.conf"]
  visibility: READ_WRITE

- name: shiva.tabletserver.tabletserver.store_conf
  recommendExpression: /etc/${service.sid}/conf/shiva/store.conf
  defaultValue: null
  valueType: STRING
  scope: !<RoleTypes> {roleTypes: [SHIVA_TABLETSERVER]}
  onDeps: []
  groups: ["tabletserver.conf"]
  visibility: READ_WRITE

- name: shiva.tabletserver.tabletserver.max_tablet_reader_queue_size
  recommendExpression: 3000
  defaultValue: 3000
  valueType: NON_NEG_INT
  scope: !<RoleTypes> {roleTypes: [SHIVA_TABLETSERVER]}
  onDeps: []
  groups: ["tabletserver.conf"]
  visibility: READ_WRITE

- name: shiva.tabletserver.rpc_service.manage_service_port
  recommendExpression: 8002
  defaultValue: 8002
  valueType: NON_NEG_INT
  scope: !<RoleTypes> {roleTypes: [SHIVA_TABLETSERVER]}
  onDeps: []
  groups: ["tabletserver.conf"]
  visibility: READ_WRITE

- name: shiva.tabletserver.rpc_service.manage_service_thread_num
  recommendExpression: 1
  defaultValue: 1
  valueType: NON_NEG_INT
  scope: !<RoleTypes> {roleTypes: [SHIVA_TABLETSERVER]}
  onDeps: []
  groups: ["tabletserver.conf"]
  visibility: READ_WRITE

- name: shiva.tabletserver.rpc_service.tablet_service_thread_num
  recommendExpression: 8
  defaultValue: 8
  valueType: NON_NEG_INT
  scope: !<RoleTypes> {roleTypes: [SHIVA_TABLETSERVER]}
  onDeps: []
  groups: ["tabletserver.conf"]
  visibility: READ_WRITE

- name: shiva.tabletserver.rpc_service.raft_service_thread_num
  recommendExpression: 4
  defaultValue: 4
  valueType: NON_NEG_INT
  scope: !<RoleTypes> {roleTypes: [SHIVA_TABLETSERVER]}
  onDeps: []
  groups: ["tabletserver.conf"]
  visibility: READ_WRITE

- name: shiva.tabletserver.rpc_service.recover_service_thread_num
  recommendExpression: 4
  defaultValue: 4
  valueType: NON_NEG_INT
  scope: !<RoleTypes> {roleTypes: [SHIVA_TABLETSERVER]}
  onDeps: []
  groups: ["tabletserver.conf"]
  visibility: READ_WRITE

- name: shiva.tabletserver.rpc_client.rpc_work_thread_num
  recommendExpression: 4
  defaultValue: 4
  valueType: NON_NEG_INT
  scope: !<RoleTypes> {roleTypes: [SHIVA_TABLETSERVER]}
  onDeps: []
  groups: ["tabletserver.conf"]
  visibility: READ_WRITE

- name: shiva.tabletserver.rpc_client.rpc_callback_thread_num
  recommendExpression: 4
  defaultValue: 4
  valueType: NON_NEG_INT
  scope: !<RoleTypes> {roleTypes: [SHIVA_TABLETSERVER]}
  onDeps: []
  groups: ["tabletserver.conf"]
  visibility: READ_WRITE

- name: shiva.tabletserver.rpc_client.rpc_timeout_ms
  recommendExpression: 10000
  defaultValue: 10000
  valueType: NON_NEG_INT
  scope: !<RoleTypes> {roleTypes: [SHIVA_TABLETSERVER]}
  onDeps: []
  groups: ["tabletserver.conf"]
  visibility: READ_WRITE

- name: shiva.tabletserver.recover.recover_rpc_call_timeout_ms
  recommendExpression: 10000
  defaultValue: 10000
  valueType: NON_NEG_INT
  scope: !<RoleTypes> {roleTypes: [SHIVA_TABLETSERVER]}
  onDeps: []
  groups: ["tabletserver.conf"]
  visibility: READ_WRITE

- name: shiva.tabletserver.recover.recover_data_buffer_size_mb
  recommendExpression: 4
  defaultValue: 4
  valueType: NON_NEG_INT
  scope: !<RoleTypes> {roleTypes: [SHIVA_TABLETSERVER]}
  onDeps: []
  groups: ["tabletserver.conf"]
  visibility: READ_WRITE

- name: shiva.tabletserver.recover.recover_data_max_concurrent
  recommendExpression: 4
  defaultValue: 4
  valueType: NON_NEG_INT
  scope: !<RoleTypes> {roleTypes: [SHIVA_TABLETSERVER]}
  onDeps: []
  groups: ["tabletserver.conf"]
  visibility: READ_WRITE

- name: shiva.tabletserver.raft.heartbeat_period_ms
  recommendExpression: 5000
  defaultValue: 5000
  valueType: NON_NEG_INT
  scope: !<RoleTypes> {roleTypes: [SHIVA_TABLETSERVER]}
  onDeps: []
  groups: ["tabletserver.conf"]
  visibility: READ_WRITE

- name: shiva.tabletserver.raft.max_batch_size_b
  recommendExpression: 2097152
  defaultValue: 2097152
  valueType: NON_NEG_INT
  scope: !<RoleTypes> {roleTypes: [SHIVA_TABLETSERVER]}
  onDeps: []
  groups: ["tabletserver.conf"]
  visibility: READ_WRITE

- name: shiva.tabletserver.raft.election_threshold
  recommendExpression: 5
  defaultValue: 5
  valueType: NON_NEG_INT
  scope: !<RoleTypes> {roleTypes: [SHIVA_TABLETSERVER]}
  onDeps: []
  groups: ["tabletserver.conf"]
  visibility: READ_WRITE

- name: shiva.tabletserver.raft.disruption_threshold
  recommendExpression: 3
  defaultValue: 3
  valueType: NON_NEG_INT
  scope: !<RoleTypes> {roleTypes: [SHIVA_TABLETSERVER]}
  onDeps: []
  groups: ["tabletserver.conf"]
  visibility: READ_WRITE

- name: shiva.tabletserver.raft.max_replicate_buffer_size_mb
  recommendExpression: 64
  defaultValue: 64
  valueType: NON_NEG_INT
  scope: !<RoleTypes> {roleTypes: [SHIVA_TABLETSERVER]}
  onDeps: []
  groups: ["tabletserver.conf"]
  visibility: READ_WRITE

- name: shiva.tabletserver.thread_pool.tablet_reader_thread_num
  recommendExpression: 8
  defaultValue: 8
  valueType: NON_NEG_INT
  scope: !<RoleTypes> {roleTypes: [SHIVA_TABLETSERVER]}
  onDeps: []
  groups: ["tabletserver.conf"]
  visibility: READ_WRITE

- name: shiva.tabletserver.store.disk_write_thread_num
  recommendExpression: 1
  defaultValue: 1
  valueType: NON_NEG_INT
  scope: !<RoleTypes> {roleTypes: [SHIVA_TABLETSERVER]}
  onDeps: []
  groups: ["tabletserver.conf"]
  visibility: READ_WRITE

- name: shiva.tabletserver.cache.kv_block_cache
  recommendExpression: 10
  defaultValue: 10
  valueType: NON_NEG_INT
  scope: !<RoleTypes> {roleTypes: [SHIVA_TABLETSERVER]}
  onDeps: []
  groups: ["tabletserver.conf"]
  visibility: READ_WRITE

# topology.conf
- name: shiva.topology.topology.rack
  recommendExpression: rack1
  defaultValue: null
  valueType: STRING
  scope: !<RoleTypes> {roleTypes: [SHIVA_TABLETSERVER]}
  onDeps: []
  groups: ["topology.conf"]
  visibility: READ_WRITE

# store.conf
- name: shiva.tabletserver.store.datadirs
  recommendExpression: |
    <#function diskSizeByMntGB mnt>
      <#list disks?reverse as disk>
        <#if mnt?contains(disk.mountPoint)>
          <#return (disk.size / 1024 / 1024 / 1024)?floor>
        </#if>
      </#list>
      <#return 0>
    </#function>
    <#function localDir suffix>
      <#if rcmdMounts?size == 0>
        <#return suffix>
      <#else>
        <#local dirs = []>
        <#list rcmdMounts?sort as mnt>
          <#if diskSizeByMntGB(mnt) gt 200>
            <#local dirs = dirs + [mnt + suffix]>
          </#if>
        </#list>
        <#return dirs?join(",")>
      </#if>
    </#function>
    ${localDir("/shiva-tabletserver/data")}
  defaultValue: null
  valueType: STRING
  isNodeSpecific: true
  scope: !<RoleTypes> {roleTypes: [SHIVA_TABLETSERVER]}
  onDeps: []
  groups: ["store.conf"]
  visibility: READ_WRITE

- name: shiva.store.capacity
  recommendExpression: |
    <#compress>
    <#function diskSizeByMntGB mnt>
      <#list disks?reverse as disk>
        <#if mnt?contains(disk.mountPoint)>
          <#return (disk.size / 1024 / 1024 / 1024)?floor>
        </#if>
      </#list>
      <#return 0>
    </#function>
    <#assign capacity=2048>
    <#list rcmdMounts as mnt>
      <#assign curCapacity = diskSizeByMntGB(mnt) / 2>
      <#if curCapacity gt 100>
        <#if curCapacity lt capacity>
          <#assign capacity=curCapacity>
        </#if>
      </#if>
    </#list>
    ${(capacity * 1000)?floor?c}
    </#compress>
  defaultValue: null
  valueType: STRING
  isNodeSpecific: true
  scope: !<RoleTypes> {roleTypes: [SHIVA_TABLETSERVER]}
  onDeps: []
  groups: ["store.conf"]
  visibility: READ_WRITE

- name: shiva.http.port
  recommendExpression: 4567
  defaultValue: null
  valueType: PORT
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: ["shiva-restful.sh"]
  visibility: READ_WRITE

- name: shiva.master.memory.ratio
  recommendExpression: -1
  defaultValue: null
  valueType: FLOAT
  scope: !<RoleTypes> {roleTypes: [SHIVA_MASTER]}
  onDeps: []
  groups: []
  visibility: READ_WRITE

- name: shiva.master.container.limits.memory
  recommendExpression: -1
  defaultValue: null
  valueType: GB
  scope: !<RoleTypes> {roleTypes: [SHIVA_MASTER]}
  onDeps: []
  groups: []
  visibility: READ_WRITE

- name: shiva.master.container.limits.cpu
  recommendExpression: -1
  defaultValue: null
  valueType: NON_NEG_INT
  scope: !<RoleTypes> {roleTypes: [SHIVA_MASTER]}
  onDeps: []
  groups: []
  visibility: READ_WRITE

- name: shiva.master.container.requests.memory
  recommendExpression: -1
  defaultValue: null
  valueType: GB
  scope: !<RoleTypes> {roleTypes: [SHIVA_MASTER]}
  onDeps: []
  groups: []
  visibility: READ_WRITE

- name: shiva.master.container.requests.cpu
  recommendExpression: -1
  defaultValue: null
  valueType: NON_NEG_INT
  scope: !<RoleTypes> {roleTypes: [SHIVA_MASTER]}
  onDeps: []
  groups: []
  visibility: READ_WRITE

- name: shiva.tabletserver.memory.ratio
  recommendExpression: -1
  defaultValue: null
  valueType: FLOAT
  scope: !<RoleTypes> {roleTypes: [SHIVA_TABLETSERVER]}
  onDeps: []
  groups: []
  visibility: READ_WRITE

- name: shiva.tabletserver.container.limits.memory
  recommendExpression: -1
  defaultValue: null
  valueType: GB
  scope: !<RoleTypes> {roleTypes: [SHIVA_TABLETSERVER]}
  onDeps: []
  groups: []
  visibility: READ_WRITE

- name: shiva.tabletserver.container.limits.cpu
  recommendExpression: -1
  defaultValue: null
  valueType: NON_NEG_INT
  scope: !<RoleTypes> {roleTypes: [SHIVA_TABLETSERVER]}
  onDeps: []
  groups: []
  visibility: READ_WRITE

- name: shiva.tabletserver.container.requests.memory
  recommendExpression: -1
  defaultValue: null
  valueType: GB
  scope: !<RoleTypes> {roleTypes: [SHIVA_TABLETSERVER]}
  onDeps: []
  groups: []
  visibility: READ_WRITE

- name: shiva.tabletserver.container.requests.cpu
  recommendExpression: -1
  defaultValue: null
  valueType: NON_NEG_INT
  scope: !<RoleTypes> {roleTypes: [SHIVA_TABLETSERVER]}
  onDeps: []
  groups: []
  visibility: READ_WRITE

- name: shiva.webserver.memory
  recommendExpression: 16
  defaultValue: null
  valueType: GB
  scope: !<RoleTypes> {roleTypes: [SHIVA_WEBSERVER]}
  onDeps: []
  groups: []
  visibility: READ_WRITE

- name: shiva.webserver.memory.ratio
  recommendExpression: -1
  defaultValue: null
  valueType: FLOAT
  scope: !<RoleTypes> {roleTypes: [SHIVA_WEBSERVER]}
  onDeps: []
  groups: []
  visibility: READ_WRITE

- name: shiva.webserver.container.limits.memory
  recommendExpression: -1
  defaultValue: null
  valueType: GB
  scope: !<RoleTypes> {roleTypes: [SHIVA_WEBSERVER]}
  onDeps: []
  groups: []
  visibility: READ_WRITE

- name: shiva.webserver.container.limits.cpu
  recommendExpression: -1
  defaultValue: null
  valueType: NON_NEG_INT
  scope: !<RoleTypes> {roleTypes: [SHIVA_WEBSERVER]}
  onDeps: []
  groups: []
  visibility: READ_WRITE

- name: shiva.webserver.container.requests.memory
  recommendExpression: -1
  defaultValue: null
  valueType: GB
  scope: !<RoleTypes> {roleTypes: [SHIVA_WEBSERVER]}
  onDeps: []
  groups: []
  visibility: READ_WRITE

- name: shiva.webserver.container.requests.cpu
  recommendExpression: -1
  defaultValue: null
  valueType: NON_NEG_INT
  scope: !<RoleTypes> {roleTypes: [SHIVA_TABLETSERVER]}
  onDeps: []
  groups: []
  visibility: READ_WRITE

##########
# Ladder #
##########
- name: transwarp.docker.enable
  recommendExpression: true
  defaultValue: null
  valueType: BOOL
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: ["core-site.xml"]
  visibility: READ_WRITE

- name: transwarp.docker.network.policy
  recommendExpression: io.transwarp.docker.DockerNetworkPolicyHostGW
  defaultValue: null
  valueType: STRING
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: ["core-site.xml"]
  visibility: READ_WRITE

- name: transwarp.docker.network.interfaces
  recommendExpression: eth0
  defaultValue: null
  valueType: STRING
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: ["core-site.xml"]
  visibility: READ_WRITE

- name: transwarp.docker.network.hypervisor-subnetmask
  recommendExpression: 255.255.255.255
  defaultValue: null
  valueType: STRING
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: ["core-site.xml"]
  visibility: READ_WRITE

#- name: ladder.master.port
#  recommendExpression: 19998
#  defaultValue: null
#  valueType: NON_NEG_INT
#  scope: !<RoleTypes> {roleTypes: [LADDER_MASTER, LADDER_WORKER]}
#  onDeps: []
#  groups: ["ladder-site.properties"]
#  visibility: READ_WRITE

- name: ladder.master.web.port
  recommendExpression: 19999
  defaultValue: null
  valueType: NON_NEG_INT
  scope: !<RoleTypes> {roleTypes: [LADDER_MASTER, LADDER_WORKER]}
  onDeps: []
  groups: ["ladder-site.properties"]
  visibility: READ_WRITE

- name: ladder.master.container.limits.memory
  recommendExpression: -1
  defaultValue: null
  valueType: GB
  scope: !<RoleTypes> {roleTypes: [LADDER_MASTER, LADDER_WORKER]}
  onDeps: []
  groups: []
  visibility: READ_WRITE

- name: ladder.master.container.limits.cpu
  recommendExpression: -1
  defaultValue: null
  valueType: NON_NEG_INT
  scope: !<RoleTypes> {roleTypes: [LADDER_MASTER, LADDER_WORKER]}
  onDeps: []
  groups: []
  visibility: READ_WRITE

- name: ladder.master.container.requests.memory
  recommendExpression: -1
  defaultValue: null
  valueType: GB
  scope: !<RoleTypes> {roleTypes: [LADDER_MASTER, LADDER_WORKER]}
  onDeps: []
  groups: []
  visibility: READ_WRITE

- name: ladder.master.container.requests.cpu
  recommendExpression: -1
  defaultValue: null
  valueType: NON_NEG_INT
  scope: !<RoleTypes> {roleTypes: [LADDER_MASTER, LADDER_WORKER]}
  onDeps: []
  groups: []
  visibility: READ_WRITE

- name: ladder.master.journal.data_path
  recommendExpression: |
    <#assign sorted = rcmdMounts?sort>
    <#if sorted?size == 0>
    /ladder/journal
    <#elseif sorted?size == 1>
    ${sorted?first}/ladder/journal
    <#else>
    ${sorted[0]}/ladder/journal
    </#if>
  defaultValue: null
  valueType: STRING
  isNodeSpecific: true
  scope: !<RoleTypes> {roleTypes: [LADDER_MASTER, LADDER_WORKER]}
  onDeps: []
  groups: ["ladder-site.properties"]
  visibility: READ_WRITE

- name: ladder.master.localfs.data_path
  recommendExpression: |
    /tmp/ladder/localfs
  defaultValue: null
  valueType: STRING
  isNodeSpecific: false
  scope: !<RoleTypes> {roleTypes: [LADDER_MASTER, LADDER_WORKER]}
  onDeps: []
  groups: ["ladder-site.properties"]
  visibility: READ_WRITE

#- name: ladder.worker.port
#  recommendExpression: 29998
#  defaultValue: null
#  valueType: NON_NEG_INT
#  scope: !<RoleTypes> {roleTypes: [LADDER_MASTER, LADDER_WORKER]}
#  onDeps: []
#  groups: ["ladder-site.properties"]
#  visibility: READ_WRITE

#- name: ladder.worker.data.port
#  recommendExpression: 29999
#  defaultValue: null
#  valueType: NON_NEG_INT
#  scope: !<RoleTypes> {roleTypes: [LADDER_MASTER, LADDER_WORKER]}
#  onDeps: []
#  groups: ["ladder-site.properties"]
#  visibility: READ_WRITE

- name: ladder.worker.web.port
  recommendExpression: 30000
  defaultValue: null
  valueType: NON_NEG_INT
  scope: !<RoleTypes> {roleTypes: [LADDER_MASTER, LADDER_WORKER]}
  onDeps: []
  groups: ["ladder-site.properties"]
  visibility: READ_WRITE

- name: ladder.worker.container.limits.memory
  recommendExpression: -1
  defaultValue: null
  valueType: GB
  scope: !<RoleTypes> {roleTypes: [LADDER_MASTER, LADDER_WORKER]}
  onDeps: []
  groups: []
  visibility: READ_WRITE

- name: ladder.worker.container.limits.cpu
  recommendExpression: -1
  defaultValue: null
  valueType: NON_NEG_INT
  scope: !<RoleTypes> {roleTypes: [LADDER_MASTER, LADDER_WORKER]}
  onDeps: []
  groups: []
  visibility: READ_WRITE

- name: ladder.worker.container.requests.memory
  recommendExpression: -1
  defaultValue: null
  valueType: GB
  scope: !<RoleTypes> {roleTypes: [LADDER_MASTER, LADDER_WORKER]}
  onDeps: []
  groups: []
  visibility: READ_WRITE

- name: ladder.worker.container.requests.cpu
  recommendExpression: -1
  defaultValue: null
  valueType: NON_NEG_INT
  scope: !<RoleTypes> {roleTypes: [LADDER_MASTER, LADDER_WORKER]}
  onDeps: []
  groups: []
  visibility: READ_WRITE

- name: ladder.worker.mem.data_path
  recommendExpression: |
    /mnt/laddermemdisk${service.sid}
  defaultValue: null
  valueType: STRING
  isNodeSpecific: true
  scope: !<RoleTypes> {roleTypes: [LADDER_MASTER, LADDER_WORKER]}
  onDeps: []
  groups: ["ladder-site.properties"]
  visibility: READ_WRITE

- name: ladder.worker.hdd.data_path
  recommendExpression: |
    <#function localDir suffix>
      <#if rcmdMounts?size == 0>
        <#return suffix>
      <#else>
        <#local dirs = []>
        <#list rcmdMounts?sort as mnt>
         <#local dirs = dirs + [mnt + suffix]>
        </#list>
        <#return dirs?join(",")>
      </#if>
    </#function>
    ${localDir("/ladder/data")}
  defaultValue: null
  valueType: STRING
  isNodeSpecific: true
  scope: !<RoleTypes> {roleTypes: [LADDER_MASTER, LADDER_WORKER]}
  onDeps: []
  groups: ["ladder-site.properties"]
  visibility: READ_WRITE

- name: ladder.worker.mem.size
  recommendExpression: |
    4GB
  defaultValue: null
  valueType: STRING
  isNodeSpecific: true
  scope: !<RoleTypes> {roleTypes: [LADDER_MASTER, LADDER_WORKER]}
  onDeps: []
  groups: ["ladder-site.properties"]
  visibility: READ_WRITE

- name: ladder.worker.tieredstore.level1.dirs.quota
  recommendExpression: |
    100GB
  defaultValue: null
  valueType: STRING
  isNodeSpecific: true
  scope: !<RoleTypes> {roleTypes: [LADDER_MASTER, LADDER_WORKER]}
  onDeps: []
  groups: ["ladder-site.properties"]
  visibility: READ_WRITE