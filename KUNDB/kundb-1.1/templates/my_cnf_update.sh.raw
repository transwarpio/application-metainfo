#!/bin/bash
set -x
if [ -n "$2" ]; then
  cat $2| while read line
  do
    if [ -n "$line" ]; then
      echo $line 
      ch=$line
      echo ${ch%%=*}
      var=${ch%%=*}
      newVar=`echo "$var" | sed  's/[ \t]*$//g'`
      if [ -n "$1" ]; then
        temp=`cat $1 | grep "^$newVar[^a-zA-Z0-9_]"`
        echo $temp
        if [ -n "$temp" ]; then
           sed -i 's/'"$temp"'/'"$line"'/' $1 
           echo "####replace is OK"
           echo $line 
        else 
            temp=`cat $1 | grep "^$newVar$"`
            if [ -n "$temp" ]; then
               sed -i 's/'"$newVar$"'/'"$line"'/' $1 
               echo "#####replace is OK"
               echo $line 
            else 
               sed -i '/mysqld/a\'"$line"'' $1 
               echo $temp
 	    fi
        fi
      fi
    fi
  done
fi
#set +x
