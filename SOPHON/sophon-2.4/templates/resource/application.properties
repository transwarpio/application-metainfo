spring.profiles.active: commons

server.address = ${service.roles.SOPHON_RESOURCE[0].hostname}
server.port = ${service['resource.server.port']}

<#if dependencies.TXSQL??>
<#assign mysqlHostPorts = []/>
    <#list dependencies.TXSQL.roles['TXSQL_SERVER'] as role>
        <#assign mysqlHostPorts = mysqlHostPorts + [role.hostname + ':' + dependencies.TXSQL['mysql.rw.port']]>
    </#list>
<#assign mysqlHostPort = mysqlHostPorts?join(",")>
spring.datasource.url=jdbc:mysql://${mysqlHostPort}/metastore_resource_${service.sid}?useUnicode=yes&characterEncoding=UTF-8&autoReconnect=true&autoReconnectForPools=true&failOverReadOnly=false&connectTimeout=10000&retriesAllDown=0&secondsBeforeRetryMaster=0&queriesBeforeRetryMaster=0
spring.datasource.username=${service['livy.jdbc.username']}
spring.datasource.password=${service['livy.jdbc.password']}
spring.datasource.driver-class-name=com.mysql.jdbc.Driver
</#if>

spring.jpa.database-platform=org.hibernate.dialect.MySQL5Dialect
spring.liquibase.change-log=classpath:/db/master.changelog.xml
spring.liquibase.enabled=true

# info.app.name=transwarp.aip.api-manager
# info.app.version=0.2.0-SNAPSHOT

logging.configure=classpath:log4j2.xml

server.ssl.enabled=false
# https
# server.ssl.key-store=classpath:sophon_ssl.key
# server.ssl.key-store-password=sophon123
# server.ssl.keyStoreType=PKCS12
# server.ssl.keyAlias:tomcat

management.security.enabled = false
management.context-path=/actuator

management.endpoint.logfile.enabled = true
management.endpoint.logfile.external-file = /var/log/${service.sid}/resource-server.log
