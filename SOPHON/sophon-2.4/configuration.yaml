# sophon.conf
- name: livy.cache.type
  recommendExpression: "simple"
  defaultValue: null
  valueType: STRING
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: []
  visibility: READ_WRITE
- name: livy.server.user.manager.open
  recommendExpression: false
  defaultValue: null
  valueType: BOOL
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: []
  visibility: READ_WRITE
- name: livy.jdbc.username
  recommendExpression: sophonuser
  defaultValue: null
  valueType: STRING
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: []
  visibility: READ_WRITE
- name: livy.jdbc.password
  recommendExpression: password
  defaultValue: null
  valueType: STRING
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: []
  visibility: PASSWORD
- name: livy.file.local-dir-whitelist
  recommendExpression: "/usr/lib/sophon"
  defaultValue: null
  valueType: ABSOLUTE_PATH
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: []
  visibility: READ_WRITE
- name: driver.docker.image.name
  recommendExpression: "${dependencies.TOS.roles['TOS_REGISTRY'][0].hostname}:${dependencies.TOS['tos.registry.port']}/transwarp/sophon-driver:sophon-2.4"
  defaultValue: null
  valueType: STRING
  scope: !<ServiceLevel> {}
  onDeps: ['TOS']
  groups: []
  visibility: READ_WRITE
# spark-defaults.conf
- name: spark.yarn.queue
  recommendExpression: "default"
  defaultValue: null
  valueType: STRING
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: []
  visibility: READ_WRITE
- name: spark.sql.warehouse.dir
  recommendExpression: "file:/usr/lib/midas/warehouse"
  defaultValue: null
  valueType: STRING
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: []
  visibility: READ_WRITE
- name: spark.yarn.dist.archives
  recommendExpression: "file:/usr/lib/spark2/R/lib/sparkr.zip#sparkr"
  defaultValue: null
  valueType: STRING
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: []
  visibility: READ_WRITE

#jvm options for park-default.conf
- name: spark.executor.heapsize
  recommendExpression: 2048
  defaultValue: null
  valueType: MB
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: []
  visibility: READ_WRITE
- name: spark.executor.permsize
  recommendExpression: 128
  defaultValue: null
  valueType: MB
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: []
  visibility: READ_WRITE
- name: spark.executor.max_permsize
  recommendExpression: 256
  defaultValue: null
  valueType: MB
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: []
  visibility: READ_WRITE
- name: spark.driver.heapsize
  recommendExpression: 2048
  defaultValue: null
  valueType: MB
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: []
  visibility: READ_WRITE
- name: spark.driver.permsize
  recommendExpression: 128
  defaultValue: null
  valueType: MB
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: []
  visibility: READ_WRITE
- name: spark.driver.max_permsize
  recommendExpression: 256
  defaultValue: null
  valueType: MB
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: []
  visibility: READ_WRITE

# redis
- name: midas.redis.port
  recommendExpression: 6379
  defaultValue: null
  valueType: PORT
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: []
  visibility: READ_WRITE

- name: redis.port
  recommendExpression: 6379
  defaultValue: null
  valueType: NON_NEG_INT
  scope: !<RoleTypes>
    roleTypes: [SOPHON_REDIS]
  onDeps: []
  groups: []
  visibility: READ_WRITE


- name: server.container.limits.memory
  recommendExpression: -1
  defaultValue: null
  valueType: GB
  scope: !<RoleTypes>
    roleTypes: [SOPHON_SERVER]
  onDeps: []
  groups: []
  visibility: READ_WRITE

- name: server.container.limits.cpu
  recommendExpression: -1
  defaultValue: null
  valueType: NON_NEG_INT
  scope: !<RoleTypes>
    roleTypes: [SOPHON_SERVER]
  onDeps: []
  groups: []
  visibility: READ_WRITE

- name: server.container.requests.memory
  recommendExpression: -1
  defaultValue: null
  valueType: GB
  scope: !<RoleTypes>
    roleTypes: [SOPHON_SERVER]
  onDeps: []
  groups: []
  visibility: READ_WRITE

- name: server.container.requests.cpu
  recommendExpression: -1
  defaultValue: null
  valueType: NON_NEG_INT
  scope: !<RoleTypes>
    roleTypes: [SOPHON_SERVER]
  onDeps: []
  groups: []
  visibility: READ_WRITE

- name: server.memory.ratio
  recommendExpression: -1
  defaultValue: null
  valueType: FLOAT
  scope: !<RoleTypes>
    roleTypes: [SOPHON_SERVER]
  onDeps: []
  groups: []
  visibility: READ_WRITE

- name: redis.container.limits.memory
  recommendExpression: -1
  defaultValue: null
  valueType: GB
  scope: !<RoleTypes>
    roleTypes: [SOPHON_REDIS]
  onDeps: []
  groups: []
  visibility: READ_WRITE

- name: redis.container.limits.cpu
  recommendExpression: -1
  defaultValue: null
  valueType: NON_NEG_INT
  scope: !<RoleTypes>
    roleTypes: [SOPHON_REDIS]
  onDeps: []
  groups: []
  visibility: READ_WRITE

- name: redis.container.requests.memory
  recommendExpression: -1
  defaultValue: null
  valueType: GB
  scope: !<RoleTypes>
    roleTypes: [SOPHON_REDIS]
  onDeps: []
  groups: []
  visibility: READ_WRITE

- name: redis.container.requests.cpu
  recommendExpression: -1
  defaultValue: null
  valueType: NON_NEG_INT
  scope: !<RoleTypes>
    roleTypes: [SOPHON_REDIS]
  onDeps: []
  groups: []
  visibility: READ_WRITE


- name: redis.bind
  recommendExpression: 0.0.0.0
  defaultValue: null
  valueType: HOST
  scope: !<RoleTypes>
    roleTypes: [SOPHON_REDIS]
  onDeps: []
  groups: []
  visibility: READ_WRITE

- name: redis.password
  recommendExpression: transwarp-redis-01
  defaultValue: null
  valueType: STRING
  scope: !<RoleTypes>
    roleTypes: [SOPHON_REDIS]
  onDeps: []
  groups: []
  visibility: PASSWORD
- name: sophon.kong.username
  recommendExpression: "admin"
  defaultValue: null
  valueType: STRING
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: []
  visibility: READ_WRITE
- name: sophon.kong.password
  recommendExpression: "passwd"
  defaultValue: null
  valueType: STRING
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: []
  visibility: PASSWORD
- name: sophon.enable.kerberos
  recommendExpression: false
  defaultValue: null
  valueType: BOOL
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: []
  visibility: READ_WRITE

- name: sophon.ui.port
  recommendExpression: 8066
  defaultValue: null
  valueType: PORT
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: []
  visibility: READ_WRITE

# notebook
- name: sophon.k8s.tensorboard.image.name
  recommendExpression: "${dependencies.TOS.roles['TOS_REGISTRY'][0].hostname}:${dependencies.TOS['tos.registry.port']}/transwarp/sophon-notebook-cpu:sophon-2.4"
  defaultValue: null
  valueType: STRING
  scope: !<ServiceLevel> {}
  onDeps: ['TOS']
  groups: []
  visibility: READ_WRITE
- name: sophon.k8s.jupyter.cpu.image.name
  recommendExpression: "${dependencies.TOS.roles['TOS_REGISTRY'][0].hostname}:${dependencies.TOS['tos.registry.port']}/transwarp/sophon-notebook-cpu:sophon-2.4"
  defaultValue: null
  valueType: STRING
  scope: !<ServiceLevel> {}
  onDeps: ['TOS']
  groups: []
  visibility: READ_WRITE
- name: sophon.k8s.jupyter.gpu.image.name
  recommendExpression: "${dependencies.TOS.roles['TOS_REGISTRY'][0].hostname}:${dependencies.TOS['tos.registry.port']}/transwarp/sophon-notebook-gpu:sophon-2.4"
  defaultValue: null
  valueType: STRING
  scope: !<ServiceLevel> {}
  onDeps: ['TOS']
  groups: []
  visibility: READ_WRITE
- name: sophon.apiservice.image.name
  recommendExpression: "${dependencies.TOS.roles['TOS_REGISTRY'][0].hostname}:${dependencies.TOS['tos.registry.port']}/transwarp/sophon-apiserver:sophon-2.4"
  defaultValue: null
  valueType: STRING
  scope: !<ServiceLevel> {}
  onDeps: ['TOS']
  groups: []
  visibility: READ_WRITE


# yarn or kuberenets
- name: sophon.resource.type
  recommendExpression: "yarn"
  defaultValue: null
  valueType: STRING
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: []
  visibility: READ_WRITE


- name: spring.http.multipart.max-file-size
  recommendExpression: "10240MB"
  defaultValue: null
  valueType: STRING
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: []
  visibility: READ_WRITE
  
- name: spring.http.multipart.max-request-size
  recommendExpression: "10240MB"
  defaultValue: null
  valueType: STRING
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: []
  visibility: READ_WRITE

- name: sophon.data.preview.limit
  recommendExpression: "5000"
  defaultValue: null
  valueType: STRING
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: []
  visibility: READ_WRITE
- name: sophon.data.downloadable
  recommendExpression: true
  defaultValue: null
  valueType: BOOL
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: []
  visibility: READ_WRITE
  
- name: sophon.auth.cas.session.timeout
  recommendExpression: "604800"
  defaultValue: null
  valueType: STRING
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: []
  visibility: READ_WRITE
- name: api.docker.repo
  recommendExpression: "${dependencies.TOS.roles['TOS_REGISTRY'][0].hostname}:${dependencies.TOS['tos.registry.port']}/transwarp/api-service"
  defaultValue: null
  valueType: STRING
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: []
  visibility: READ_WRITE

- name: r.repo.username
  recommendExpression: sophonuser
  defaultValue: null
  valueType: STRING
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: []
  visibility: READ_WRITE
- name: r.repo.password
  recommendExpression: password
  defaultValue: null
  valueType: STRING
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: []
  visibility: PASSWORD

- name: r.repo.username
  recommendExpression: sophonuser
  defaultValue: null
  valueType: STRING
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: []
  visibility: READ_WRITE
- name: r.repo.password
  recommendExpression: password
  defaultValue: null
  valueType: STRING
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: []
  visibility: PASSWORD
- name: r.repo.port
  recommendExpression: 8717
  defaultValue: null
  valueType: PORT
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: []
  visibility: READ_WRITE

- name: python.repo.username
  recommendExpression: sophonuser
  defaultValue: null
  valueType: STRING
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: []
  visibility: READ_WRITE
- name: python.repo.password
  recommendExpression: password
  defaultValue: null
  valueType: STRING
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: []
  visibility: PASSWORD
- name: python.repo.port
  recommendExpression: 8716
  defaultValue: null
  valueType: PORT
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: []
  visibility: READ_WRITE

- name: server.ssl.enabled
  recommendExpression: true
  defaultValue: null
  valueType: BOOL
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: []
  visibility: READ_WRITE

- name: gateway.server.port
  recommendExpression: 8700
  defaultValue: null
  valueType: PORT
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: []
  visibility: READ_WRITE
- name: sophon.visit.port
  recommendExpression: 8701
  defaultValue: null
  valueType: PORT
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: []
  visibility: READ_WRITE
- name: sophon.proxy.api.port
  recommendExpression: 8702
  defaultValue: null
  valueType: PORT
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: []
  visibility: READ_WRITE
- name: notebook.server.port
  recommendExpression: 8708
  defaultValue: null
  valueType: PORT
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: []
  visibility: READ_WRITE
- name: notebook.visit.port
  recommendExpression: 8709
  defaultValue: null
  valueType: PORT
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: []
  visibility: READ_WRITE
- name: sophon.server.port
  recommendExpression: 8703
  defaultValue: null
  valueType: NON_NEG_INT
  scope: !<RoleTypes>
    roleTypes: [SOPHON_BASE]
  onDeps: []
  groups: []
  visibility: READ_WRITE
- name: user.server.port
  recommendExpression: 8710
  defaultValue: null
  valueType: PORT
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: []
  visibility: READ_WRITE
- name: apimanager.server.port
  recommendExpression: 8711
  defaultValue: null
  valueType: PORT
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: []
  visibility: READ_WRITE
- name: approval.server.port
  recommendExpression: 8712
  defaultValue: null
  valueType: PORT
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: []
  visibility: READ_WRITE
- name: audit.server.port
  recommendExpression: 8713
  defaultValue: null
  valueType: PORT
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: []
  visibility: READ_WRITE
- name: share.server.port
  recommendExpression: 8714
  defaultValue: null
  valueType: PORT
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: []
  visibility: READ_WRITE
- name: kg.server.port
  recommendExpression: 8715
  defaultValue: null
  valueType: PORT
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: []
  visibility: READ_WRITE
- name: kg.explorer.port
  recommendExpression: 8730
  defaultValue: null
  valueType: PORT
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: []
  visibility: READ_WRITE
- name: resource.server.port
  recommendExpression: 8718
  defaultValue: null
  valueType: PORT
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: []
  visibility: READ_WRITE
- name: notification.server.port
  recommendExpression: 8719
  defaultValue: null
  valueType: PORT
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: []
  visibility: READ_WRITE
- name: notification.socket.port
  recommendExpression: 8720
  defaultValue: null
  valueType: PORT
  scope: !<ServiceLevel> {}
  onDeps: []
  groups: []
  visibility: READ_WRITE
- name: nfs.share.name.dir
  recommendExpression: |
    <#assign sorted = rcmdMounts?sort>
    <#if sorted?size == 0>
    /sophon/nfs_dir/${service.sid}
    <#else>
    ${sorted[0]}/sophon/nfs_dir/${service.sid}
    </#if>
  defaultValue: file:///tmp/sophon/nfs_dir/sophon
  valueType: STRING
  isNodeSpecific: true
  scope: !<RoleTypes>
    roleTypes:
    - SOPHON_NFS
  onDeps: []
  groups: []
  visibility: READ_WRITE